---
title: "R Markdown Exercise"
author: "Lei Huang"
date: "2019-02-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Exercise 1

In this exercise, we explore different styles of the html file generated by R Markdown.

### Define a floating table of contents

Try it yourself:  

* Add a floating table of contents.  
```
---
title: "R Markdown Exercise"
author: "Lei Huang"
date: "2019-02-07"
output: 
  html_document:
    toc: true
    toc_float: true
---
```

### Change a theme

We can change how the html page looks like by add a theme name from the following options: **default**, **cerulean**, **journal**, **flatly**, **darkly**, **readable**, **spacelab**, **united**, **cosmo**, **lumen**, **paper**, **sandstone**, **simplex**, **yeti**. 

Try it yourself:  

* Set a theme of your choice.  
```
---
title: "R Markdown Exercise"
author: "Lei Huang"
date: "2019-02-07"
output: 
  html_document:
    toc: true
    toc_float: true
    theme: journal
---
```

### Specify syntax highlighting style

We can also change how the code chunk looks like using the highlight option. Supported styles include **default**, **tango**, **pygments**, **kate**, **monochrome**, **espresso**, **zenburn**, **haddock**, and **textmate**. Pass null to prevent syntax highlighting.

Try it yourself:  

* Highlight the code chunk using **espresso**.

```
---
title: "R Markdown Exercise"
author: "Lei Huang"
date: "2019-02-07"
output: 
  html_document:
    toc: true
    toc_float: true
    theme: journal
    highlight: espresso
---
```

## Exercise 2

In this exercise, we learn to add citation (references) to the report. First we need to create two files.

### Citation Style File

CSL files define the citation formatting. Depending on what journal you are going to submit, you will need a different .csl file. Here we use the format for **Bioinformatics** journal, but you can search the CSL GitHub repository for the appropriate file. <https://github.com/citation-style-language/styles>

### BibTeX

Reference in R Markdown is managed by BibTeX. You can see from the YAML that we need a bibliography text file called "bibliography.bib". You can name it whatever you like but you will need to change the YAML accordingly. In any case, any citation you intend to make will have to be in the .bib file. 

Below is a bibliography file with only one entry. It is located in the same folder as this R Markdown file. You make a .bib file using a text file editor (or RStudio) by cutting and pasting the BibTex citations from Google Scholar or any other reference management software. 

```
@article{kim2015t,
  title={T test as a parametric statistic},
  author={Kim, Tae Kyun},
  journal={Korean journal of anesthesiology},
  volume={68},
  number={6},
  pages={540--546},
  year={2015}
}
```
***  
Next, we change our yaml header.

Try it yourself: 

* Add two lines to the header
  - bibliography: bibliography.bib
  - csl: bioinformatics.csl
  
```
---
title: "R Markdown Exercise"
author: "Lei Huang"
date: "2019-02-07"
output: 
  html_document:
    toc: true
    toc_float: true
    theme: journal
    highlight: espresso
bibliography: bibliography.bib
csl: bioinformatics.csl
---
```

Finally, to cite a reference, we use the notation ```[@kim2015t]```. The actual references will automatially appear at the end of the report. To distinguish the references from other sections, you can add a reference section header.

Here I cite [@kim2015t] for this analysis.

<!-- ## Exercise 3 -->

<!-- In this exercise, we analyze Chicago weather data obtained from NOAA for December 2018 and January 2019, write an R Markdown report in html format, and add a citation. -->

<!-- *** -->

<!-- ### Introduction -->

<!-- The National Oceanic and Atmospheric Administration ([NOAA](https://www.noaa.gov)) weather service provides weather, hydrologic and climate forecasts and warnings for the United States, its territories, adjacent waters and ocean areas through a network of national and regional centers, 13 river forecast centers, and more than 120 local weather forecast offices. Here in Illinois, NOAA has 1,719 stations across the state. We will fetch the data from the station located at O'Hare International Airport using R package rnoaa, which we already installed. This analysis requires to load the following R packages: -->

<!-- ```{r load_package, message=FALSE} -->
<!-- library(here) -->
<!-- library(tidyverse) -->
<!-- library(rnoaa) -->
<!-- library(knitr) -->
<!-- ``` -->

<!-- ### Data -->

<!-- We first obtain the station information from Global Historical Climatology Network's daily data (GHCND) for each of the stations and join them together in a single dataframe using the following code chunk: -->

<!-- ```{r get_data, cache=TRUE} -->
<!-- station_data <- ghcnd_stations() -->
<!-- station_data -->
<!-- ``` -->

<!-- We then filter out data and only retain those were measured at O'Hare station. -->

<!-- ```{r filter_data, message=FALSE, cache=TRUE} -->
<!-- station_data_il <- station_data %>% filter(state == "IL") -->
<!-- # How many stations in Illinois? -->
<!-- # length(unique(station_data_il$name)) -->
<!-- station_data_ohare <- station_data_il %>% -->
<!--     filter(name == "CHICAGO OHARE INTL AP") -->
<!-- ``` -->

<!-- Next we extract weather data for December 2018 and January 2019. -->

<!-- ```{r clean_data, message=FALSE, cache=TRUE} -->
<!-- # pull weather data from multiple weather monitors located at O'Hare. -->
<!-- monitors <- station_data_ohare$id -->

<!-- all_monitors_clean <- meteo_pull_monitors(monitors, -->
<!--                                           date_min = "2018-12-01", -->
<!--                                           date_max = "2019-01-31") %>% -->
<!--     select(id, date, awnd, prcp, tavg, tmax, tmin) %>% -->
<!--     mutate( prcp = prcp / 10, # unit conversion (from tenth of mm to mm) -->
<!--             tavg = tavg / 10, # unit conversion (from tenth of celsius to celsius) -->
<!--             tmax = tmax / 10, -->
<!--             tmin = tmin /10) -->

<!-- # Extract year and month -->
<!-- all_monitors_clean <- all_monitors_clean %>% mutate(time = str_remove(date, '.{3}$')) -->
<!-- ``` -->

<!-- **Challenge 1**: show a table for the first **10** records of the weather data we just cleaned. -->

<!-- ```{r} -->
<!-- knitr::kable(all_monitors_clean[1:10,]) -->
<!-- ``` -->

<!-- **Challenge 2**: write a list to show the type of weather data in the table, use **bold** and _italic_ font. -->

<!-- The data collected contain four types of weather data: -->

<!-- - _**prcp**_ -->
<!-- - _**tavg**_ -->
<!-- - _**tmax**_ -->
<!-- - _**tmin**_ -->

<!-- ### Analysis -->

<!-- **Challenge 3**: Is there a significant difference of average temperature between December and Juanary? Use Student's $t$-test to check your hypothesis. -->

<!-- ```{r ttest} -->
<!-- tavg_dec <- all_monitors_clean %>% filter(time == "2019-01") %>% select(tavg) %>% pull() -->
<!-- tavg_jan <- all_monitors_clean %>% filter(time == "2018-12") %>% select(tavg) %>% pull() -->
<!-- diff_tavg <- t.test(tavg_dec, tavg_jan) -->
<!-- diff_tavg$p.value -->
<!-- ``` -->


<!-- **Challenge 4**: Show the difference with a boxplot. -->

<!-- ```{r boxplot} -->
<!-- boxplot(tavg ~ time, data = all_monitors_clean, xlab = "Time", -->
<!--         ylab = expression(paste("Monthly average temperature (", degree,"C)"))) -->
<!-- ``` -->

<!-- ### Conclusion -->

<!-- **Challenge 4**: -->

<!-- - Cite the reference in Exercise 2 for the $t$-test method at somewhere in your text. -->
<!-- - Show the test $p$-value using inline r code, compare it with $p$-value 0.05, and draw your conclusion. -->

<!-- Because the t-test[@kim2015t] $p$-value (`r #format(diff_tavg$p.value, digit=3)`) > 0.05, we found no statistical difference on average temperature between December 2018 and January 2019 at $\alpha=0.05$. -->

<!-- <!-- **Note**: a more robust solution would be comparing the $p$-value with the sigificant level of 0.05 in running time and output the corresponding conclusion. This requires R package **latex2exp** and is not covered here. --> -->

<!-- <!-- Because the t-test [@kim2015t] $p$-value is `r #format(diff_tavg$p.value, digit=3)`, `r #ifelse(diff_tavg$p.value > 0.05, "we found no statistical difference on average temperature between December 2018 and January 2019 at $\\alpha$ = 0.05.", "we found there is a statistical difference on average temperature between December 2018 and January 2019 at $\\alpha$ = 0.05.")` --> -->

### Session Information

```{r}
sessionInfo()
```

### Reference







